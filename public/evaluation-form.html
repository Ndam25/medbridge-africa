<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MedBridge Africa — Formulaire d'Évaluation</title>
  <!-- SIG:FORM-v3 -->
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f9fafb;margin:0;color:#111;}
    main{max-width:800px;margin:0 auto;padding:20px;}
    h1{text-align:center;color:#0f766e}
    .card{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:20px;margin-top:20px;}
    label{display:block;margin-top:10px;font-weight:600;}
    input,textarea,select{width:100%;padding:8px;margin-top:4px;border:1px solid #cbd5e1;border-radius:6px;}
    .actions{margin-top:20px;display:flex;gap:10px;justify-content:space-between;flex-wrap:wrap}
    button{background:#0f766e;color:white;border:none;padding:10px 16px;border-radius:6px;cursor:pointer}
    button.secondary{background:#64748b}
    .step{display:none}
    .step.active{display:block}
    .hint{margin-top:16px;color:#475569;font-size:.9rem}
    footer{text-align:center;margin-top:30px;color:#64748b}
  </style>
</head>
<body>
  <main>
    <h1>Évaluation d’éligibilité</h1>

    <!-- Step 1 -->
    <section class="card step active" data-step="0">
      <h2>1) Profil & Choix du programme</h2>
      <label>Programme visé</label>
      <select id="program" required>
        <option value="">— choisir —</option>
        <option>EB1-A</option>
        <option>EB2-NIW</option>
      </select>

      <label>Nom complet</label>
      <input id="full_name" type="text" placeholder="Votre nom complet" required/>

      <label>Email</label>
      <input id="email" type="email" placeholder="Adresse email" required/>

      <div class="actions">
        <button type="button" class="next">Suivant</button>
      </div>
      <p class="hint">Astuce : vous pouvez enregistrer un brouillon dans votre navigateur (non activé ici pour simplicité).</p>
    </section>

    <!-- Step 2 -->
    <section class="card step" data-step="1">
      <h2>2) Académique & Expérience</h2>
      <label>Niveau académique le plus élevé</label>
      <select id="education"><option value=""></option><option>Licence</option><option>Master</option><option>Doctorat</option></select>

      <label>Années d’expérience</label>
      <input id="years" type="number" min="0" value="0"/>

      <label>Résumé de parcours</label>
      <textarea id="summary" placeholder="3–5 lignes…"></textarea>

      <div class="actions">
        <button type="button" class="prev secondary">Précédent</button>
        <button type="button" class="next">Suivant</button>
      </div>
    </section>

    <!-- Step 3 -->
    <section class="card step" data-step="2">
      <h2>3) Preuves & Réalisations</h2>
      <label>Publications scientifiques (nombre estimé)</label>
      <input id="pubs" type="number" min="0" value="0"/>

      <label>Citations (Google Scholar / Scopus)</label>
      <input id="cites" type="number" min="0" value="0"/>

      <label>Prix / distinctions</label>
      <textarea id="awards" placeholder="Liste brève…"></textarea>

      <div class="actions">
        <button type="button" class="prev secondary">Précédent</button>
        <button type="button" class="next">Suivant</button>
      </div>
    </section>

    <!-- Step 4 -->
    <section class="card step" data-step="3">
      <h2>4) Projet & Objectifs aux États-Unis</h2>
      <label>Secteur / thématique du projet</label>
      <input id="project_sector" type="text"/>

      <label>État / Ville ciblé(e)</label>
      <input id="project_place" type="text"/>

      <label>Résumé du projet</label>
      <textarea id="project_summary" placeholder="Importance nationale, bénéficiaires, livrables…"></textarea>

      <div class="actions">
        <button type="button" class="prev secondary">Précédent</button>
        <button type="button" class="next">Suivant</button>
      </div>
    </section>

    <!-- Step 5 -->
    <section class="card step" data-step="4">
      <h2>5) Consentement & Envoi</h2>
      <label>
        <input id="consent" type="checkbox" /> J’accepte le traitement de mes données pour l’évaluation.
      </label>
      <div class="actions">
        <button type="button" class="prev secondary">Précédent</button>
        <button type="button" id="submit">Soumettre</button>
      </div>
    </section>

    <footer>© <span id="year"></span> MedBridge Africa</footer>
  </main>

  <script>
    // Navigation multi-étapes robuste (délégation d'événements)
    (function(){
      const steps = Array.from(document.querySelectorAll(".step"));
      let idx = steps.findIndex(s => s.classList.contains("active"));
      if (idx < 0) { steps[0].classList.add("active"); idx = 0; }

      function show(i){
        steps.forEach((s,k)=>s.classList.toggle("active", k===i));
        idx = i;
        // Scroll top pour éviter qu’un saut de page bloque les clics
        window.scrollTo(0,0);
      }

      document.addEventListener("click", function(e){
        const t = e.target;
        if (!(t instanceof HTMLElement)) return;

        if (t.classList.contains("next")) {
          // Petite validation minimale à l’étape 0
          if (idx===0) {
            const program = document.getElementById("program");
            const name = document.getElementById("full_name");
            const mail = document.getElementById("email");
            if (!program.value || !name.value || !mail.value) {
              alert("Veuillez renseigner Programme, Nom et Email.");
              return;
            }
          }
          if (idx < steps.length-1) show(idx+1);
          return;
        }

        if (t.classList.contains("prev")) {
          if (idx > 0) show(idx-1);
          return;
        }

        if (t.id === "submit") {
          if (!document.getElementById("consent").checked) {
            alert("Merci de cocher la case de consentement.");
            return;
          }
          // Redirige vers le rapport (statique) — on peut brancher /api/eligibility plus tard
          location.href = "/evaluation-report.html?v=" + Date.now();
        }
      });

      // Année dans le footer
      document.getElementById("year").textContent = new Date().getFullYear();
    })();
  </script>
</body>
</html>